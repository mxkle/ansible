---
# this role installs mongodb

#- name: apt-get update as a separate step
#  apt:
#    update_cache: yes

- name: import key used by apt
  apt_key:
    keyserver: "{{ mongodb_keyserver }}"
    id: "{{ mongodb_key }}"
    state: present

- name: add mongodb repo
  apt_repository:
    repo: "{{ mongodb_repo }}"
    state: present
    update_cache: yes
    filename: "{{ mongodb_sources_list }}"

- name: install mongodb
  apt:
    name: "{{ mongodb_packages }}"
    state: present
    update_cache: yes
  notify: start mongod

- include: handlers/main.yml
